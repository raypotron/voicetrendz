import{u as $,r as x,b as S,j as e,a as o,X as u}from"./app-CbE51Ljd.js";import{i as M}from"./axios-CDMVKEYl.js";import{u as L,C as f,F as _,S as U,a as R}from"./use-likeable-B_Y2SEfo.js";import{d as i,r as E}from"./relativeTime-CV1aseZZ.js";import{C as I}from"./chevron-right-CJK6V9OL.js";import{U as T,M as B}from"./user-Dg5eq2jJ.js";import{C as F}from"./calendar-CFScKLRm.js";import{E as Y}from"./eye-B9DqtqiD.js";import{C as H}from"./clock-DFQ2hlwD.js";import{H as V}from"./heart-COVHwe3R.js";import{M as A}from"./message-circle-CKDjLS28.js";/* empty css            */import"./index-ikzcNs2d.js";i.extend(E);function se({post:s,relatedArticles:b,isLiked:j,likesCount:v}){const{isDarkMode:a}=$(),[h,n]=x.useState(!1),[g,N]=x.useState(s.views),t=encodeURIComponent(s.slug),c=encodeURIComponent(s.title),{props:w}=S(),p=w.user,{liked:m,count:k,toggleLike:y}=L({likeableId:s.id,likeableType:"post",initialLiked:j,initialCount:v,routeName:"like.toggle",user:p||void 0}),C=()=>{if(!p){const r=encodeURIComponent(window.location.pathname+window.location.search);window.location.href=`/user/login?returnUrl=${r}&likePostId=${s.id}`;return}y()},l={whatsapp:`https://api.whatsapp.com/send?text=${c}%20${t}`,facebook:`https://www.facebook.com/sharer/sharer.php?u=${t}`,twitter:`https://twitter.com/intent/tweet?text=${c}&url=${t}`,gmail:`mailto:?subject=${c}&body=${t}`};return x.useEffect(()=>{(async()=>{try{const d=await M.post(`/posts/${s.slug}/track-view`);N(d.data.views)}catch(d){console.error("Error tracking post view:",d)}})()},[s.slug]),s?e.jsx("div",{className:`min-h-screen bg-background text-foreground ${a?"dark":""}`,children:e.jsxs("article",{className:"w-full",children:[e.jsxs("div",{className:"relative h-96 w-full overflow-hidden bg-muted sm:h-[500px]",children:[e.jsx("img",{src:s.thumbnail_url||"/placeholder.svg",alt:s.title,className:"h-full w-full object-cover"}),e.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-black/70 via-black/30 to-transparent"})]}),e.jsxs("div",{className:"mx-auto max-w-3xl px-4 sm:px-6 lg:px-8",children:[e.jsxs("div",{className:"mt-8 mb-8 flex justify-between gap-4",children:[e.jsxs("button",{onClick:()=>o.visit("/press-release"),className:"flex items-center gap-2 font-medium text-primary transition-colors hover:text-accent",children:[e.jsx(f,{className:"h-5 w-5"}),"Back to articles"]}),e.jsxs("button",{onClick:()=>o.visit("/home"),className:"flex items-center gap-2 font-medium text-primary transition-colors hover:text-accent",children:["Back to Home",e.jsx(I,{className:"h-5 w-5"})]})]}),e.jsxs("div",{className:"mb-8",children:[e.jsx("div",{className:"mb-4",children:e.jsx("span",{className:"inline-block rounded-full bg-primary/10 px-4 py-2 text-sm font-semibold text-primary",children:s.category.name})}),e.jsx("h1",{className:"blog-title post-card-title mb-6",children:s.title}),e.jsxs("div",{className:"blog-meta space-y-1 border-b border-border pb-6",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(T,{className:"h-4 w-4 text-muted-foreground"}),e.jsx("span",{className:"font-medium",children:s.user.name})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(F,{className:"h-4 w-4 text-muted-foreground"}),e.jsx("span",{children:i(s.created_at).format("MMMM D, YYYY")})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Y,{className:"h-4 w-4 text-muted-foreground"}),e.jsxs("span",{children:[g," ",g===1?"view":"views"]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(H,{className:"h-4 w-4 text-muted-foreground"}),e.jsx("span",{children:i(s.created_at).fromNow()})]})]})]}),e.jsx("article",{className:"",children:e.jsx(_,{html:s.content})}),e.jsxs("div",{className:"relative flex flex-wrap items-center gap-4 border-t border-b border-border py-8",children:[e.jsxs("button",{onClick:C,className:`flex items-center gap-2 rounded-lg px-6 py-3 font-medium transition-all ${m?"bg-primary text-primary-foreground":"bg-secondary text-secondary-foreground hover:bg-secondary/80"}`,children:[e.jsx(V,{className:`h-5 w-5 ${m?"fill-current":""}`}),m?"Liked":"Like this"," (",k,")"]}),e.jsxs("div",{className:"relative",children:[e.jsxs("button",{onClick:()=>n(!h),className:"flex cursor-pointer items-center gap-2 rounded-lg bg-secondary px-6 py-3 font-medium text-secondary-foreground transition-all hover:bg-secondary/80",children:[e.jsx(U,{className:"h-5 w-5"}),"Share"]}),h&&e.jsxs("div",{className:`animate-fade-in absolute left-0 z-20 mt-2 w-56 rounded-lg ${a?"bg-gray-900":"bg-white"} shadow-lg ring-1 ring-black/5`,onMouseLeave:()=>n(!1),children:[e.jsx("button",{onClick:()=>n(!1),className:"absolute top-2 right-5 rounded-md p-1 hover:bg-gray-200 dark:hover:bg-gray-700",children:e.jsx(u,{className:"h-4 w-4"})}),e.jsxs("div",{className:"flex flex-col py-4",children:[e.jsxs("a",{href:l.whatsapp,target:"_blank",rel:"noopener noreferrer",className:`flex items-center gap-2 px-4 py-2 text-sm ${a?"hover:bg-gray-700":"hover:bg-gray-100"}`,children:[e.jsx(A,{className:"h-4 w-4 text-green-500"}),"Share on WhatsApp"]}),e.jsxs("a",{href:l.facebook,target:"_blank",rel:"noopener noreferrer",className:`flex items-center gap-2 px-4 py-2 text-sm ${a?"hover:bg-gray-700":"hover:bg-gray-100"}`,children:[e.jsx(R,{className:"h-4 w-4 text-blue-600"}),"Share on Facebook"]}),e.jsxs("a",{href:l.twitter,target:"_blank",rel:"noopener noreferrer",className:`flex items-center gap-2 px-4 py-2 text-sm ${a?"hover:bg-gray-700":"hover:bg-gray-100"}`,children:[e.jsx(u,{className:"h-4 w-4 text-sky-500"}),"Share on Twitter"]}),e.jsxs("a",{href:l.gmail,target:"_blank",rel:"noopener noreferrer",className:`flex items-center gap-2 px-4 py-2 text-sm ${a?"hover:bg-gray-700":"hover:bg-gray-100"}`,children:[e.jsx(B,{className:"h-4 w-4 text-red-500"}),"Share via Gmail"]})]})]})]})]}),e.jsxs("div",{className:"py-12",children:[e.jsx("h2",{className:"mb-8 text-3xl font-bold",children:"Related Articles"}),e.jsx("div",{className:"grid grid-cols-1 gap-6 md:grid-cols-2",children:b.map(r=>e.jsxs("div",{onClick:()=>o.visit(`/posts/${r.slug}`),className:"group cursor-pointer",children:[e.jsx("div",{className:"relative mb-4 h-48 overflow-hidden rounded-lg bg-muted",children:e.jsx("img",{src:r.thumbnail_url||"/placeholder.svg",alt:r.title,className:"h-full w-full object-cover transition-transform duration-300 group-hover:scale-105"})}),e.jsx("h3",{className:"mb-2 text-xl font-bold transition-colors group-hover:text-primary",children:r.title}),e.jsx("p",{className:"text-sm text-muted-foreground",children:i(r.created_at).fromNow()})]},r.id))})]})]})]})}):e.jsx("div",{className:"min-h-screen bg-background text-foreground",children:e.jsxs("div",{className:"mx-auto max-w-4xl px-4 py-12 sm:px-6 lg:px-8",children:[e.jsxs("button",{onClick:()=>o.visit(document.referrer||"/"),className:"mb-8 flex items-center gap-2 text-primary transition-colors hover:text-accent",children:[e.jsx(f,{className:"h-5 w-5"}),e.jsx("span",{className:"font-medium",children:"Back"})]}),e.jsxs("div",{className:"py-12 text-center",children:[e.jsx("h1",{className:"mb-4 text-4xl font-bold",children:"Post not found"}),e.jsx("p",{className:"text-lg text-muted-foreground",children:"The post you're looking for doesn't exist."})]})]})})}export{se as default};
