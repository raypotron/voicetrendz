import{u as U,r as y,e as F,j as e,a as u,X as T}from"./app-Bhanao-l.js";import{u as Y,i as q}from"./use-likeable-CK5Wrq0x.js";import{d as f,r as P}from"./relativeTime-DOyKAUO5.js";import{C as L,S as V,F as I}from"./share-2-Dk0ZR70o.js";import{C as z}from"./chevron-right-BV1_0t1h.js";import{U as G,M as W}from"./user-CcSdGT0d.js";import{C as J}from"./calendar-a3P3RFWp.js";import{E as K}from"./eye-DubKEF8E.js";import{C as Q}from"./clock-DZYqNTF0.js";import{H as Z}from"./heart-CvQhBa2p.js";import{M as ee}from"./message-circle-DWSb5CdY.js";/* empty css            */import"./index-ikzcNs2d.js";f.extend(P);function pe({lyric:s,relatedLyrics:k,isLiked:_,likesCount:M}){const{isDarkMode:i}=U(),[E,N]=y.useState(!1),[C,$]=y.useState(s.views),{props:D}=F(),A=D.user,x=encodeURIComponent(s.slug),b=encodeURIComponent(s.title),{liked:j,count:O,toggleLike:S}=Y({likeableId:s.id,likeableType:"lyric",initialLiked:_,initialCount:M,routeName:"like.toggle"}),h={whatsapp:`https://api.whatsapp.com/send?text=${b}%20${x}`,facebook:`https://www.facebook.com/sharer/sharer.php?u=${x}`,twitter:`https://twitter.com/intent/tweet?text=${b}&url=${x}`,gmail:`mailto:?subject=${b}&body=${x}`};y.useEffect(()=>{(async()=>{try{const g=await q.post(`/lyrics/${s.slug}/track-view`);$(g.data.views)}catch(g){console.error("Error tracking post view:",g)}})()},[s.slug]);const X=()=>{if(!A){window.location.replace("/user/login");return}S()},B=a=>(H=>{const R=new DOMParser().parseFromString(H,"text/html");return Array.from(R.body.childNodes).map((p,o)=>{if(p.nodeType===Node.TEXT_NODE){const t=p.textContent?.trim();return t?e.jsx("p",{className:"blog-paragraph",children:t},o):null}if(p.nodeType===Node.ELEMENT_NODE){const t=p;switch(t.tagName.toLowerCase()){case"img":return e.jsxs("figure",{className:"blog-figure",children:[e.jsx("img",{src:t.getAttribute("src")||"/placeholder.svg",alt:t.getAttribute("alt")||"Blog image",className:"blog-image"}),t.getAttribute("alt")&&e.jsx("figcaption",{className:"blog-figcaption",children:t.getAttribute("alt")})]},o);case"h4":return e.jsx("h4",{className:"blog-heading-4",children:t.textContent},o);case"h3":return e.jsx("h3",{className:"blog-heading-3",children:t.textContent},o);case"h2":return e.jsx("h2",{className:"blog-heading-2",children:t.textContent},o);case"p":return e.jsx("p",{className:"blog-paragraph",children:Array.from(t.childNodes).map((l,c)=>{if(l.nodeType===Node.TEXT_NODE)return l.textContent;if(l.nodeType===Node.ELEMENT_NODE){const r=l;if(r.tagName.toLowerCase()==="strong")return e.jsx("strong",{children:r.textContent},c);if(r.tagName.toLowerCase()==="em")return e.jsx("em",{children:r.textContent},c)}return null})},o);case"ul":return e.jsx("ul",{className:"blog-list",children:Array.from(t.children).map((l,c)=>e.jsx("li",{className:"blog-list-item",children:Array.from(l.childNodes).map((r,v)=>{if(r.nodeType===Node.TEXT_NODE)return r.textContent;if(r.nodeType===Node.ELEMENT_NODE){const m=r;if(m.tagName.toLowerCase()==="p")return e.jsx("span",{children:Array.from(m.childNodes).map((n,w)=>{if(n.nodeType===Node.TEXT_NODE)return n.textContent;if(n.nodeType===Node.ELEMENT_NODE){const d=n;if(d.tagName.toLowerCase()==="strong")return e.jsx("strong",{children:d.textContent},w)}return null})},v)}return null})},c))},o);case"ol":return e.jsx("ol",{className:"blog-ordered-list",children:Array.from(t.children).map((l,c)=>e.jsx("li",{className:"blog-list-item",children:Array.from(l.childNodes).map((r,v)=>{if(r.nodeType===Node.TEXT_NODE)return r.textContent;if(r.nodeType===Node.ELEMENT_NODE){const m=r;if(m.tagName.toLowerCase()==="p")return e.jsx("span",{children:Array.from(m.childNodes).map((n,w)=>{if(n.nodeType===Node.TEXT_NODE)return n.textContent;if(n.nodeType===Node.ELEMENT_NODE){const d=n;if(d.tagName.toLowerCase()==="strong")return e.jsx("strong",{children:d.textContent},w)}return null})},v)}return null})},c))},o);case"blockquote":return e.jsx("blockquote",{className:"blog-blockquote",children:t.textContent},o);default:return null}}return null})})(a);return s?e.jsx("div",{className:`min-h-screen bg-background text-foreground ${i?"dark":""}`,children:e.jsxs("article",{className:"w-full",children:[e.jsxs("div",{className:"relative h-96 w-full overflow-hidden bg-muted sm:h-[500px]",children:[e.jsx("img",{src:s.thumbnail_url||"/placeholder.svg",alt:s.title,className:"h-full w-full object-cover"}),e.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-black/70 via-black/30 to-transparent"})]}),e.jsxs("div",{className:"mx-auto max-w-3xl px-4 sm:px-6 lg:px-8",children:[e.jsxs("div",{className:"mt-8 mb-8 flex justify-between gap-4",children:[e.jsxs("button",{onClick:()=>u.visit("/lyrics"),className:"flex items-center gap-2 font-medium text-primary transition-colors hover:text-accent",children:[e.jsx(L,{className:"h-5 w-5"}),"Back to Lyrics"]}),e.jsxs("button",{onClick:()=>u.visit("/home"),className:"flex items-center gap-2 font-medium text-primary transition-colors hover:text-accent",children:["Back to Home",e.jsx(z,{className:"h-5 w-5"})]})]}),e.jsxs("div",{className:"mb-8",children:[e.jsx("h1",{className:"blog-title post-card-title mb-6",children:s.title}),e.jsxs("div",{className:"blog-meta space-y-1 border-b border-border pb-6",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(G,{className:"h-4 w-4 text-muted-foreground"}),e.jsx("span",{className:"font-medium",children:s.user.name})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(J,{className:"h-4 w-4 text-muted-foreground"}),e.jsx("span",{children:f(s.created_at).format("MMMM D, YYYY")})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(K,{className:"h-4 w-4 text-muted-foreground"}),e.jsxs("span",{children:[C," ",C===1?"view":"views"]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Q,{className:"h-4 w-4 text-muted-foreground"}),e.jsx("span",{children:f(s.created_at).fromNow()})]})]})]}),e.jsx("div",{className:"blog-content post-card-font py-8",children:B(s.content)}),e.jsxs("div",{className:"relative flex flex-wrap items-center gap-4 border-t border-b border-border py-8",children:[e.jsxs("button",{onClick:X,className:`flex items-center gap-2 rounded-lg px-6 py-3 font-medium transition-all ${j?"bg-primary text-primary-foreground":"bg-secondary text-secondary-foreground hover:bg-secondary/80"}`,children:[e.jsx(Z,{className:`h-5 w-5 ${j?"fill-current":""}`}),j?"Liked":"Like this"," (",O,")"]}),e.jsxs("div",{className:"relative",children:[e.jsxs("button",{onClick:()=>N(!E),className:"flex cursor-pointer items-center gap-2 rounded-lg bg-secondary px-6 py-3 font-medium text-secondary-foreground transition-all hover:bg-secondary/80",children:[e.jsx(V,{className:"h-5 w-5"}),"Share"]}),E&&e.jsxs("div",{className:`animate-fade-in absolute left-0 z-20 mt-2 w-56 rounded-lg ${i?"bg-gray-900":"bg-white"} shadow-lg ring-1 ring-black/5`,onMouseLeave:()=>N(!1),children:[e.jsx("button",{onClick:()=>N(!1),className:"absolute top-2 right-5 rounded-md p-1 hover:bg-gray-200 dark:hover:bg-gray-700",children:e.jsx(T,{className:"h-4 w-4"})}),e.jsxs("div",{className:"flex flex-col py-2",children:[e.jsxs("a",{href:h.whatsapp,target:"_blank",rel:"noopener noreferrer",className:`flex items-center gap-2 px-4 py-2 text-sm ${i?"hover:bg-gray-700":"hover:bg-gray-100"}`,children:[e.jsx(ee,{className:"h-4 w-4 text-green-500"}),"Share on WhatsApp"]}),e.jsxs("a",{href:h.facebook,target:"_blank",rel:"noopener noreferrer",className:`flex items-center gap-2 px-4 py-2 text-sm ${i?"hover:bg-gray-700":"hover:bg-gray-100"}`,children:[e.jsx(I,{className:"h-4 w-4 text-blue-600"}),"Share on Facebook"]}),e.jsxs("a",{href:h.twitter,target:"_blank",rel:"noopener noreferrer",className:`flex items-center gap-2 px-4 py-2 text-sm ${i?"hover:bg-gray-700":"hover:bg-gray-100"}`,children:[e.jsx(T,{className:"h-4 w-4 text-sky-500"}),"Share on Twitter"]}),e.jsxs("a",{href:h.gmail,target:"_blank",rel:"noopener noreferrer",className:`flex items-center gap-2 px-4 py-2 text-sm ${i?"hover:bg-gray-700":"hover:bg-gray-100"}`,children:[e.jsx(W,{className:"h-4 w-4 text-red-500"}),"Share via Gmail"]})]})]})]})]}),e.jsxs("div",{className:"py-12",children:[e.jsx("h2",{className:"mb-8 text-3xl font-bold",children:"Related Lyrics"}),e.jsx("div",{className:"grid grid-cols-1 gap-6 md:grid-cols-2",children:k?.length?k.map(a=>e.jsxs("div",{onClick:()=>u.visit(`/lyrics/${a.slug}`),className:"group cursor-pointer",children:[e.jsx("div",{className:"relative mb-4 h-48 overflow-hidden rounded-lg bg-muted",children:e.jsx("img",{src:a.thumbnail_url||"/placeholder.svg",alt:a.title,className:"h-full w-full object-cover transition-transform duration-300 group-hover:scale-105"})}),e.jsx("h3",{className:"mb-2 text-xl font-bold transition-colors group-hover:text-primary",children:a.title}),e.jsx("p",{className:"text-sm text-muted-foreground",children:f(a.created_at).fromNow()})]},a.id)):e.jsx("p",{className:"text-gray-500 italic",children:"No related lyrics available."})})]})]})]})}):e.jsx("div",{className:"min-h-screen bg-background text-foreground",children:e.jsxs("div",{className:"mx-auto max-w-4xl px-4 py-12 sm:px-6 lg:px-8",children:[e.jsxs("button",{onClick:()=>u.visit(document.referrer||"/"),className:"mb-8 flex items-center gap-2 text-primary transition-colors hover:text-accent",children:[e.jsx(L,{className:"h-5 w-5"}),e.jsx("span",{className:"font-medium",children:"Back"})]}),e.jsxs("div",{className:"py-12 text-center",children:[e.jsx("h1",{className:"mb-4 text-4xl font-bold",children:"Lyric not found"}),e.jsx("p",{className:"text-lg text-muted-foreground",children:"The lyric you're looking for doesn't exist."})]})]})})}export{pe as default};
