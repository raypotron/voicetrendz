import{i as f,r as s,a as k}from"./app-BLzRydkY.js";import{s as w}from"./index-ikzcNs2d.js";const h=document.querySelector('meta[name="csrf-token"]')?.getAttribute("content"),P=f.create({headers:{"X-Requested-With":"XMLHttpRequest","X-CSRF-TOKEN":h??"",Accept:"application/json"}});function R({likeableId:n,likeableType:i,initialLiked:u,initialCount:l,routeName:p,user:r}){const[t,d]=s.useState(u),[e,m]=s.useState(l),a=()=>{k.post(w(p,{id:n,type:i}),{},{preserveScroll:!0,onSuccess:()=>{d(!t),m(t?e-1:e+1)}})};return s.useEffect(()=>{if(!r)return;const o=new URLSearchParams(window.location.search),c=o.get("likePostId");if(c&&parseInt(c)===Number(n)&&!t){a(),o.delete("likePostId");const S=window.location.pathname+"?"+o.toString();window.history.replaceState({},"",S)}},[r]),{liked:t,count:e,toggleLike:a}}export{P as i,R as u};
