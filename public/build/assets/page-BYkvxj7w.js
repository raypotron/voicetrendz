import{b as F,a as g,r as b,u as H,d as U,j as e,F as B,X as Y}from"./app-icBez_MP.js";import{s as V}from"./index-ikzcNs2d.js";import{d as j,r as I}from"./relativeTime-BMFXYzxp.js";import{C as M,U as W,H as z,S as G,M as K,a as J}from"./user-iPtjvAEH.js";import{C as P}from"./calendar-Ddlq8K-R.js";import{E as Q,C as Z}from"./eye-CLdP835x.js";/* empty css            */const ee=document.querySelector('meta[name="csrf-token"]')?.getAttribute("content"),te=F.create({headers:{"X-Requested-With":"XMLHttpRequest","X-CSRF-TOKEN":ee??"",Accept:"application/json"}});function re({likeableId:t,likeableType:y,initialLiked:w,initialCount:v,routeName:k}){const[c,h]=g.useState(w),[i,E]=g.useState(v);return{liked:c,count:i,toggleLike:()=>{b.post(V(k,{id:t,type:y}),{},{preserveScroll:!0,onSuccess:()=>{h(!c),E(c?i-1:i+1)}})}}}j.extend(I);function de({post:t,relatedArticles:y,isLiked:w,likesCount:v}){const{isDarkMode:k}=H(),[c,h]=g.useState(!1),[i,E]=g.useState(t.views),d=encodeURIComponent(t.slug),T=encodeURIComponent(t.title),{props:S}=U(),A=S.user,{liked:C,count:D,toggleLike:O}=re({likeableId:t.id,likeableType:"post",initialLiked:w,initialCount:v,routeName:"like.toggle"}),$=()=>{if(!A){window.location.replace("/user/login");return}O()},p={whatsapp:`https://api.whatsapp.com/send?text=${T}%20${d}`,facebook:`https://www.facebook.com/sharer/sharer.php?u=${d}`,twitter:`https://twitter.com/intent/tweet?text=${T}&url=${d}`,gmail:`mailto:?subject=${T}&body=${d}`};g.useEffect(()=>{(async()=>{try{const f=await te.post(`/posts/${t.slug}/track-view`);E(f.data.views)}catch(f){console.error("Error tracking post view:",f)}})()},[t.slug]);const X=a=>(R=>{const q=new DOMParser().parseFromString(R,"text/html");return Array.from(q.body.childNodes).map((N,n)=>{if(N.nodeType===Node.TEXT_NODE){const r=N.textContent?.trim();return r?e.jsx("p",{className:"blog-paragraph",children:r},n):null}if(N.nodeType===Node.ELEMENT_NODE){const r=N;switch(r.tagName.toLowerCase()){case"img":return e.jsxs("figure",{className:"blog-figure",children:[e.jsx("img",{src:r.getAttribute("src")||"/placeholder.svg",alt:r.getAttribute("alt")||"Blog image",className:"blog-image"}),r.getAttribute("alt")&&e.jsx("figcaption",{className:"blog-figcaption",children:r.getAttribute("alt")})]},n);case"h4":return e.jsx("h4",{className:"blog-heading-4",children:r.textContent},n);case"h3":return e.jsx("h3",{className:"blog-heading-3",children:r.textContent},n);case"h2":return e.jsx("h2",{className:"blog-heading-2",children:r.textContent},n);case"p":return e.jsx("p",{className:"blog-paragraph",children:Array.from(r.childNodes).map((l,m)=>{if(l.nodeType===Node.TEXT_NODE)return l.textContent;if(l.nodeType===Node.ELEMENT_NODE){const s=l;if(s.tagName.toLowerCase()==="strong")return e.jsx("strong",{children:s.textContent},m);if(s.tagName.toLowerCase()==="em")return e.jsx("em",{children:s.textContent},m)}return null})},n);case"ul":return e.jsx("ul",{className:"blog-list",children:Array.from(r.children).map((l,m)=>e.jsx("li",{className:"blog-list-item",children:Array.from(l.childNodes).map((s,L)=>{if(s.nodeType===Node.TEXT_NODE)return s.textContent;if(s.nodeType===Node.ELEMENT_NODE){const x=s;if(x.tagName.toLowerCase()==="p")return e.jsx("span",{children:Array.from(x.childNodes).map((o,_)=>{if(o.nodeType===Node.TEXT_NODE)return o.textContent;if(o.nodeType===Node.ELEMENT_NODE){const u=o;if(u.tagName.toLowerCase()==="strong")return e.jsx("strong",{children:u.textContent},_)}return null})},L)}return null})},m))},n);case"ol":return e.jsx("ol",{className:"blog-ordered-list",children:Array.from(r.children).map((l,m)=>e.jsx("li",{className:"blog-list-item",children:Array.from(l.childNodes).map((s,L)=>{if(s.nodeType===Node.TEXT_NODE)return s.textContent;if(s.nodeType===Node.ELEMENT_NODE){const x=s;if(x.tagName.toLowerCase()==="p")return e.jsx("span",{children:Array.from(x.childNodes).map((o,_)=>{if(o.nodeType===Node.TEXT_NODE)return o.textContent;if(o.nodeType===Node.ELEMENT_NODE){const u=o;if(u.tagName.toLowerCase()==="strong")return e.jsx("strong",{children:u.textContent},_)}return null})},L)}return null})},m))},n);case"blockquote":return e.jsx("blockquote",{className:"blog-blockquote",children:r.textContent},n);default:return null}}return null})})(a);return t?e.jsx("div",{className:`min-h-screen bg-background text-foreground ${k?"dark":""}`,children:e.jsxs("article",{className:"w-full",children:[e.jsxs("div",{className:"relative h-96 w-full overflow-hidden bg-muted sm:h-[500px]",children:[e.jsx("img",{src:t.thumbnail_url||"/placeholder.svg",alt:t.title,className:"h-full w-full object-cover"}),e.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-black/70 via-black/30 to-transparent"})]}),e.jsxs("div",{className:"mx-auto max-w-3xl px-4 sm:px-6 lg:px-8",children:[e.jsxs("button",{onClick:()=>b.visit(document.referrer||"/"),className:"mt-8 mb-8 flex items-center gap-2 font-medium text-primary transition-colors hover:text-accent",children:[e.jsx(M,{className:"h-5 w-5"}),"Back to articles"]}),e.jsxs("div",{className:"mb-8",children:[e.jsx("div",{className:"mb-4",children:e.jsx("span",{className:"inline-block rounded-full bg-primary/10 px-4 py-2 text-sm font-semibold text-primary",children:t.category.name})}),e.jsx("h1",{className:"blog-title mb-6",children:t.title}),e.jsxs("div",{className:"blog-meta space-y-1 border-b border-border pb-6",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(W,{className:"h-4 w-4 text-muted-foreground"}),e.jsx("span",{className:"font-medium",children:t.user.name})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(P,{className:"h-4 w-4 text-muted-foreground"}),e.jsx("span",{children:j(t.created_at).format("MMMM D, YYYY")})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Q,{className:"h-4 w-4 text-muted-foreground"}),e.jsxs("span",{children:[i," ",i===1?"view":"views"]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Z,{className:"h-4 w-4 text-muted-foreground"}),e.jsx("span",{children:j(t.created_at).fromNow()})]})]})]}),e.jsx("div",{className:"blog-content py-8",children:X(t.content)}),e.jsxs("div",{className:"relative flex flex-wrap items-center gap-4 border-t border-b border-border py-8",children:[e.jsxs("button",{onClick:$,className:`flex items-center gap-2 rounded-lg px-6 py-3 font-medium transition-all ${C?"bg-primary text-primary-foreground":"bg-secondary text-secondary-foreground hover:bg-secondary/80"}`,children:[e.jsx(z,{className:`h-5 w-5 ${C?"fill-current":""}`}),C?"Liked":"Like this"," (",D,")"]}),e.jsxs("div",{className:"relative",children:[e.jsxs("button",{onClick:()=>h(!c),className:"flex cursor-pointer items-center gap-2 rounded-lg bg-secondary px-6 py-3 font-medium text-secondary-foreground transition-all hover:bg-secondary/80",children:[e.jsx(G,{className:"h-5 w-5"}),"Share"]}),c&&e.jsx("div",{className:"animate-fade-in absolute left-0 z-20 mt-2 w-56 rounded-lg bg-white shadow-lg ring-1 ring-black/5",onMouseLeave:()=>h(!1),children:e.jsxs("div",{className:"flex flex-col py-2",children:[e.jsxs("a",{href:p.whatsapp,target:"_blank",rel:"noopener noreferrer",className:"flex items-center gap-2 px-4 py-2 text-sm hover:bg-gray-100",children:[e.jsx(K,{className:"h-4 w-4 text-green-500"}),"Share on WhatsApp"]}),e.jsxs("a",{href:p.facebook,target:"_blank",rel:"noopener noreferrer",className:"flex items-center gap-2 px-4 py-2 text-sm hover:bg-gray-100",children:[e.jsx(B,{className:"h-4 w-4 text-blue-600"}),"Share on Facebook"]}),e.jsxs("a",{href:p.twitter,target:"_blank",rel:"noopener noreferrer",className:"flex items-center gap-2 px-4 py-2 text-sm hover:bg-gray-100",children:[e.jsx(Y,{className:"h-4 w-4 text-sky-500"}),"Share on Twitter"]}),e.jsxs("a",{href:p.gmail,target:"_blank",rel:"noopener noreferrer",className:"flex items-center gap-2 px-4 py-2 text-sm hover:bg-gray-100",children:[e.jsx(J,{className:"h-4 w-4 text-red-500"}),"Share via Gmail"]})]})})]})]}),e.jsxs("div",{className:"py-12",children:[e.jsx("h2",{className:"mb-8 text-3xl font-bold",children:"Related Articles"}),e.jsx("div",{className:"grid grid-cols-1 gap-6 md:grid-cols-2",children:y.map(a=>e.jsxs("div",{onClick:()=>b.visit(`/posts/${a.slug}`),className:"group cursor-pointer",children:[e.jsx("div",{className:"relative mb-4 h-48 overflow-hidden rounded-lg bg-muted",children:e.jsx("img",{src:a.thumbnail_url||"/placeholder.svg",alt:a.title,className:"h-full w-full object-cover transition-transform duration-300 group-hover:scale-105"})}),e.jsx("h3",{className:"mb-2 text-xl font-bold transition-colors group-hover:text-primary",children:a.title}),e.jsx("p",{className:"text-sm text-muted-foreground",children:j(a.created_at).fromNow()})]},a.id))})]})]})]})}):e.jsx("div",{className:"min-h-screen bg-background text-foreground",children:e.jsxs("div",{className:"mx-auto max-w-4xl px-4 py-12 sm:px-6 lg:px-8",children:[e.jsxs("button",{onClick:()=>b.visit(document.referrer||"/"),className:"mb-8 flex items-center gap-2 text-primary transition-colors hover:text-accent",children:[e.jsx(M,{className:"h-5 w-5"}),e.jsx("span",{className:"font-medium",children:"Back"})]}),e.jsxs("div",{className:"py-12 text-center",children:[e.jsx("h1",{className:"mb-4 text-4xl font-bold",children:"Post not found"}),e.jsx("p",{className:"text-lg text-muted-foreground",children:"The post you're looking for doesn't exist."})]})]})})}export{de as default};
