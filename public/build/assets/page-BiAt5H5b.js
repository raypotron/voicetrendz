import{c as L,u as S,r as o,b as R,j as e,a as i,X as p}from"./app-BrVniS-4.js";import{i as U}from"./axios-BihCrAR2.js";import{u as I,C as v,F as E,S as F,a as H}from"./use-likeable-B8PE7Ecv.js";import{d as c,r as A}from"./relativeTime-D2PKYEOw.js";import{G as T,a as V,b as Y}from"./index-G_J8kIGb.js";import{C as B}from"./chevron-right-DSX-Iul-.js";import{U as z,M as G}from"./user-04FFbLDT.js";import{C as P}from"./calendar-CRw-fU_S.js";import{E as D}from"./eye-LWfIHeE9.js";import{C as W}from"./clock-CpVXDT03.js";import{H as X}from"./heart-DAWjO0sC.js";import{M as Z}from"./message-circle-BC4TdRGg.js";/* empty css            */import"./index-ikzcNs2d.js";/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const q=[["path",{d:"M21 15V6",key:"h1cx4g"}],["path",{d:"M18.5 18a2.5 2.5 0 1 0 0-5 2.5 2.5 0 0 0 0 5Z",key:"8saifv"}],["path",{d:"M12 12H3",key:"18klou"}],["path",{d:"M16 6H3",key:"1wxfjs"}],["path",{d:"M12 18H3",key:"11ftsu"}]],J=L("ListMusic",q);function K(s){return T({attr:{role:"img",viewBox:"0 0 24 24"},child:[{tag:"path",attr:{d:"M.331 11.378s.5418-.089.765.1439c.2234.2332.077.7156-.2195.7237-.2965.01-.5705.063-.765-.1439-.1946-.2066-.1424-.6218.2195-.7237m5.881 3.2925c-.0522.01-.1075-.018-.164-.059-.3884-.5413-.5287-2.3923-.707-2.5025-.185-.1144-.8545 1.0255-2.1862.903-.5569-.051-1.1236-.4121-1.4573-.662.031-.4206.0364-1.4027.8659-1.0833.5038.1939 1.3667.7266 2.1245-.23.8378-1.0579 1.2999-.7506 1.577-.5206.2771.23.0925 1.4259.5058 1.0916.4133-.3343 2.082-2.4103 2.082-2.4103s1.292-1.303 1.4898.067c.1979 1.3698 1.0403 2.8877 1.2635 2.8445.2234-.043 2.8223-5.3253 3.1945-5.666.3722-.3409 1.6252-.2961 1.5657.5781-.0596.8742-.1871 6.308-.1871 6.308s-.147 1.5311.0924.7128c.0992-.3392.206-.6453.3392-1.0024.6414-2.0534 1.734-5.5613 2.2784-7.3688.1252-.4325.233-.8037.3166-1.0891l.0001-.0008a3.5925 3.5925 0 0 1 .0973-.3305c.0455-.1532.0763-.2546.0858-.2813.0243-.068.0925-.1192.1884-.157.0962-.061.1995-.064.3165-.067.3021-.027.6907.012 1.0401.1119.1018 0 .2125.037.3172.1118v.0001s.0063 0 .0151.01c.0023 0 .0048 0 .0073.01.0219.015.0573.045.0983.095.0012 0 .0025 0 .004.01.017.021.0341.045.0515.073.1952.2863.315.814.1948 1.7498-.2996 2.3354-.5316 7.1397-.5316 7.1397s-.0461.2298.4353-.782c.0167-.035.0383-.066.058-.098.026-.017.0552-.042.0913-.085.2974-.3546 1.0968-.5629 1.6512-.5586.2336.028.4293.087.5462.1609.2188.333.0897 1.562.0897 1.562-.4612.043-1.3403.2908-1.6519.3366-.3118.046-.7852 2.0699-1.4433 1.8629-.6581-.2069-2.1246-1.1268-2.1246-1.2533 0-.1102.1152-1.4546.1453-1.8016.0022-.024.004-.046.0058-.068a.152.152 0 0 1 .0014-.014l-.0002.0003c.0213-.2733.0023-.3927-.1239-.1199-.1086.2346-.581 1.7359-1.1078 3.3709-.0556.1429-1.0511 3.1558-1.1818 3.5231-.156.4261-.287.7523-.3776.921-.1378.1867-.3234.3036-.5826.2252-.6465-.1954-1.4654-1.0889-1.473-1.3106-.0155-1.2503.0608-7.973-.2423-7.4127-.311.5744-2.73 4.5608-2.73 4.5608-.0405.01-.0705.01-.1062.01-.1712-.019-.4366-.074-.51-.2384-.004-.01-.0094-.018-.0129-.028-.0035-.01-.0075-.022-.0135-.04-.0329-.1097-.0463-.2289-.0753-.3265-.1082-.3652-.2813-.8886-.463-1.421-.2784-.9079-.5654-1.8366-.6127-1.9391-.0923-.2007-.2268-.116-.3475-.0002-.54.458-1.6868 2.4793-2.7225 2.5898"},child:[]}]})(s)}c.extend(A);function xe({song:s,relatedSongs:u,isLiked:y,likesCount:N,previousRoute:w}){const{isDarkMode:r}=S(),[g,n]=o.useState(!1),[f,d]=o.useState(!1),[b,k]=o.useState(s.views),{props:_}=R(),j=_.user,t=encodeURIComponent(s.slug),m=encodeURIComponent(s.title),{liked:x,count:C,toggleLike:$}=I({likeableId:s.id,likeableType:"song",initialLiked:y,initialCount:N,routeName:"like.toggle",user:j||void 0}),M=()=>{if(!j){const a=encodeURIComponent(window.location.pathname+window.location.search);window.location.href=`/user/login?returnUrl=${a}&likePostId=${s.id}`;return}$()},l={whatsapp:`https://api.whatsapp.com/send?text=${m}%20${t}`,facebook:`https://www.facebook.com/sharer/sharer.php?u=${t}`,twitter:`https://twitter.com/intent/tweet?text=${m}&url=${t}`,gmail:`mailto:?subject=${m}&body=${t}`};return o.useEffect(()=>{(async()=>{try{const h=await U.post(`/songs/${s.slug}/track-view`);k(h.data.views)}catch(h){console.error("Error tracking post view:",h)}})()},[s.slug]),s?e.jsx("div",{className:`min-h-screen bg-background text-foreground ${r?"dark":""}`,children:e.jsxs("article",{className:"w-full",children:[e.jsxs("div",{className:"relative h-96 w-full overflow-hidden bg-muted sm:h-[500px]",children:[e.jsx("img",{src:s.thumbnail_url||"/placeholder.svg",alt:s.title,className:"h-full w-full object-cover"}),e.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-black/70 via-black/30 to-transparent"})]}),e.jsxs("div",{className:"mx-auto max-w-3xl px-4 sm:px-6 lg:px-8",children:[e.jsxs("div",{className:"mt-8 mb-8 flex justify-between gap-4",children:[e.jsxs("button",{onClick:()=>i.visit(`${w}`||"/songs"),className:"flex items-center gap-2 font-medium text-primary transition-colors hover:text-accent",children:[e.jsx(v,{className:"h-5 w-5"}),"Return"]}),e.jsxs("button",{onClick:()=>i.visit("/home"),className:"flex items-center gap-2 font-medium text-primary transition-colors hover:text-accent",children:["Back to Home",e.jsx(B,{className:"h-5 w-5"})]})]}),e.jsxs("div",{className:"mb-8",children:[e.jsx("h1",{className:"blog-title post-card-title mb-6",children:s.title}),e.jsxs("div",{className:"blog-meta space-y-1 border-b border-border pb-6",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(z,{className:"h-4 w-4 text-muted-foreground"}),e.jsx("span",{className:"font-medium",children:s.user.name})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(P,{className:"h-4 w-4 text-muted-foreground"}),e.jsx("span",{children:c(s.created_at).format("MMMM D, YYYY")})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(D,{className:"h-4 w-4 text-muted-foreground"}),e.jsxs("span",{children:[b," ",b===1?"view":"views"]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(W,{className:"h-4 w-4 text-muted-foreground"}),e.jsx("span",{children:c(s.created_at).fromNow()})]})]})]}),e.jsxs("div",{className:"blog-content post-card-font py-8",children:[e.jsx("article",{className:"",children:e.jsx(E,{html:s.content})}),s.file_path&&e.jsxs("div",{className:"mt-8 flex flex-col items-center",children:[e.jsx("h3",{className:"mb-3 text-center text-lg font-semibold",children:"Listen to this song"}),e.jsxs("audio",{controls:!0,className:"w-full max-w-md rounded-lg border border-border",children:[e.jsx("source",{src:s.file_path,type:"audio/mpeg"}),"Your browser does not support the audio element."]})]}),s.spotify_embed?e.jsx("iframe",{style:{borderRadius:"12px"},src:s.spotify_embed,width:"100%",height:"152",allow:"autoplay; clipboard-write; encrypted-media; fullscreen; picture-in-picture",loading:"lazy"}):e.jsx("p",{}),s.audiomack_url?e.jsx("iframe",{src:s.audiomack_url,style:{borderRadius:12,border:0},scrolling:"no",width:"100%",height:"252",title:"Lalala"}):e.jsx("p",{})]}),e.jsxs("div",{className:"relative flex flex-wrap items-center gap-4 border-t border-b border-border py-8",children:[e.jsxs("button",{onClick:M,className:`flex items-center gap-2 rounded-lg px-6 py-3 font-medium transition-all ${x?"bg-primary text-primary-foreground":"bg-secondary text-secondary-foreground hover:bg-secondary/80"}`,children:[e.jsx(X,{className:`h-5 w-5 ${x?"fill-current":""}`}),x?"Liked":"Like this"," (",C,")"]}),e.jsxs("div",{className:"relative",children:[e.jsxs("button",{onClick:()=>n(!g),className:"flex cursor-pointer items-center gap-2 rounded-lg bg-secondary px-6 py-3 font-medium text-secondary-foreground transition-all hover:bg-secondary/80",children:[e.jsx(F,{className:"h-5 w-5"}),"Share"]}),g&&e.jsxs("div",{className:`animate-fade-in absolute left-0 z-20 mt-2 w-56 rounded-lg ${r?"bg-gray-900":"bg-white"} shadow-lg ring-1 ring-black/5`,onMouseLeave:()=>n(!1),children:[e.jsx("button",{onClick:()=>n(!1),className:"absolute top-2 right-5 rounded-md p-1 hover:bg-gray-200 dark:hover:bg-gray-700",children:e.jsx(p,{className:"h-4 w-4"})}),e.jsxs("div",{className:"flex flex-col py-2",children:[e.jsxs("a",{href:l.whatsapp,target:"_blank",rel:"noopener noreferrer",className:`flex items-center gap-2 px-4 py-2 text-sm ${r?"hover:bg-gray-700":"hover:bg-gray-100"}`,children:[e.jsx(Z,{className:"h-4 w-4 text-green-500"}),"Share on WhatsApp"]}),e.jsxs("a",{href:l.facebook,target:"_blank",rel:"noopener noreferrer",className:`flex items-center gap-2 px-4 py-2 text-sm ${r?"hover:bg-gray-700":"hover:bg-gray-100"}`,children:[e.jsx(H,{className:"h-4 w-4 text-blue-600"}),"Share on Facebook"]}),e.jsxs("a",{href:l.twitter,target:"_blank",rel:"noopener noreferrer",className:`flex items-center gap-2 px-4 py-2 text-sm ${r?"hover:bg-gray-700":"hover:bg-gray-100"}`,children:[e.jsx(p,{className:"h-4 w-4 text-sky-500"}),"Share on Twitter"]}),e.jsxs("a",{href:l.gmail,target:"_blank",rel:"noopener noreferrer",className:`flex items-center gap-2 px-4 py-2 text-sm ${r?"hover:bg-gray-700":"hover:bg-gray-100"}`,children:[e.jsx(G,{className:"h-4 w-4 text-red-500"}),"Share via Gmail"]})]})]})]}),e.jsxs("div",{className:"relative",children:[s.apple_music||s.voicenute||s.spotify||s.audio_mack?e.jsxs("button",{onClick:()=>d(!f),className:"flex cursor-pointer items-center gap-2 rounded-lg bg-secondary px-6 py-3 font-medium text-secondary-foreground transition-all hover:bg-secondary/80",children:[e.jsx(J,{className:"h-5 w-5"}),"Continue to Listen"]}):null,f&&e.jsxs("div",{className:`animate-fade-in absolute left-0 z-20 mt-2 w-56 rounded-lg ${r?"bg-gray-900":"bg-white"} shadow-lg ring-1 ring-black/5`,onMouseLeave:()=>d(!1),children:[e.jsx("button",{onClick:()=>d(!1),className:"absolute top-2 right-5 rounded-md p-1 hover:bg-gray-200 dark:hover:bg-gray-700",children:e.jsx(p,{className:"h-4 w-4"})}),e.jsxs("div",{className:"flex flex-col py-2",children:[s.apple_music&&e.jsxs("a",{href:s.apple_music,target:"_blank",rel:"noopener noreferrer",className:`flex items-center gap-2 px-4 py-2 text-sm ${r?"hover:bg-gray-700":"hover:bg-gray-100"}`,children:[e.jsx(V,{className:"h-4 w-4 text-green-500"}),"Apple Music"]}),s.voicenute&&e.jsxs("a",{href:s.voicenute,target:"_blank",rel:"noopener noreferrer",className:`flex items-center gap-2 px-4 py-2 text-sm ${r?"hover:bg-gray-700":"hover:bg-gray-100"}`,children:[e.jsx("img",{src:"/logo-16x16.png",alt:"voicenute logo",className:""}),"Voicenute"]}),s.spotify&&e.jsxs("a",{href:s.spotify,target:"_blank",rel:"noopener noreferrer",className:`flex items-center gap-2 px-4 py-2 text-sm ${r?"hover:bg-gray-700":"hover:bg-gray-100"}`,children:[e.jsx(Y,{className:"h-4 w-4 text-sky-500"}),"Spotify"]}),s.audio_mack&&e.jsxs("a",{href:s.audio_mack,target:"_blank",rel:"noopener noreferrer",className:`flex items-center gap-2 px-4 py-2 text-sm ${r?"hover:bg-gray-700":"hover:bg-gray-100"}`,children:[e.jsx(K,{className:"h-4 w-4 text-red-500"}),"Audio Mack"]})]})]})]})]}),e.jsxs("div",{className:"py-12",children:[e.jsx("h2",{className:"mb-8 text-3xl font-bold",children:"Related Songs"}),e.jsx("div",{className:"grid grid-cols-1 gap-6 md:grid-cols-2",children:u?.length?u.map(a=>e.jsxs("div",{onClick:()=>i.visit(`/songs/${a.slug}`),className:"group cursor-pointer",children:[e.jsx("div",{className:"relative mb-4 h-48 overflow-hidden rounded-lg bg-muted",children:e.jsx("img",{src:a.thumbnail_url||"/placeholder.svg",alt:a.title,className:"h-full w-full object-cover transition-transform duration-300 group-hover:scale-105"})}),e.jsx("h3",{className:"mb-2 text-xl font-bold transition-colors group-hover:text-primary",children:a.title}),e.jsx("p",{className:"text-sm text-muted-foreground",children:c(a.created_at).fromNow()})]},a.id)):e.jsx("p",{className:"text-gray-500 italic",children:"No related songs available."})})]})]})]})}):e.jsx("div",{className:"min-h-screen bg-background text-foreground",children:e.jsxs("div",{className:"mx-auto max-w-4xl px-4 py-12 sm:px-6 lg:px-8",children:[e.jsxs("button",{onClick:()=>i.visit(document.referrer||"/"),className:"mb-8 flex items-center gap-2 text-primary transition-colors hover:text-accent",children:[e.jsx(v,{className:"h-5 w-5"}),e.jsx("span",{className:"font-medium",children:"Back"})]}),e.jsxs("div",{className:"py-12 text-center",children:[e.jsx("h1",{className:"mb-4 text-4xl font-bold",children:"Song not found"}),e.jsx("p",{className:"text-lg text-muted-foreground",children:"The song you're looking for doesn't exist."})]})]})})}export{xe as default};
