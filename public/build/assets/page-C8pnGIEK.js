import{c as K,f as h,u as Z,r as k,e as J,j as e,a as P,F as D,X as Q}from"./app-DRg03FOj.js";import{u as ee,i as te}from"./use-likeable-D1Dipk1p.js";import{d as E,r as re}from"./relativeTime-X3KcXYK4.js";import{C as A,S as ae}from"./share-2-B_9LzMAj.js";import{U as se,M as ne}from"./user-C22UXUFo.js";import{C as oe}from"./calendar-DLYZiqvr.js";import{E as le}from"./eye-B02mpkXv.js";import{C as ie}from"./clock-B9xakcF2.js";import{H as ce}from"./heart-D7bTZXX8.js";import{M as me}from"./message-circle-Wdm9SvZt.js";/* empty css            */import"./index-ikzcNs2d.js";/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const de=[["path",{d:"M21 15V6",key:"h1cx4g"}],["path",{d:"M18.5 18a2.5 2.5 0 1 0 0-5 2.5 2.5 0 0 0 0 5Z",key:"8saifv"}],["path",{d:"M12 12H3",key:"18klou"}],["path",{d:"M16 6H3",key:"1wxfjs"}],["path",{d:"M12 18H3",key:"11ftsu"}]],ue=K("ListMusic",de);var H={color:void 0,size:void 0,className:void 0,style:void 0,attr:void 0},z=h.createContext&&h.createContext(H),pe=["attr","size","title"];function he(t,r){if(t==null)return{};var a=xe(t,r),s,n;if(Object.getOwnPropertySymbols){var d=Object.getOwnPropertySymbols(t);for(n=0;n<d.length;n++)s=d[n],!(r.indexOf(s)>=0)&&Object.prototype.propertyIsEnumerable.call(t,s)&&(a[s]=t[s])}return a}function xe(t,r){if(t==null)return{};var a={};for(var s in t)if(Object.prototype.hasOwnProperty.call(t,s)){if(r.indexOf(s)>=0)continue;a[s]=t[s]}return a}function C(){return C=Object.assign?Object.assign.bind():function(t){for(var r=1;r<arguments.length;r++){var a=arguments[r];for(var s in a)Object.prototype.hasOwnProperty.call(a,s)&&(t[s]=a[s])}return t},C.apply(this,arguments)}function B(t,r){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);r&&(s=s.filter(function(n){return Object.getOwnPropertyDescriptor(t,n).enumerable})),a.push.apply(a,s)}return a}function _(t){for(var r=1;r<arguments.length;r++){var a=arguments[r]!=null?arguments[r]:{};r%2?B(Object(a),!0).forEach(function(s){fe(t,s,a[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):B(Object(a)).forEach(function(s){Object.defineProperty(t,s,Object.getOwnPropertyDescriptor(a,s))})}return t}function fe(t,r,a){return r=ge(r),r in t?Object.defineProperty(t,r,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[r]=a,t}function ge(t){var r=be(t,"string");return typeof r=="symbol"?r:r+""}function be(t,r){if(typeof t!="object"||!t)return t;var a=t[Symbol.toPrimitive];if(a!==void 0){var s=a.call(t,r);if(typeof s!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(r==="string"?String:Number)(t)}function I(t){return t&&t.map((r,a)=>h.createElement(r.tag,_({key:a},r.attr),I(r.child)))}function S(t){return r=>h.createElement(Ne,C({attr:_({},t.attr)},r),I(t.child))}function Ne(t){var r=a=>{var{attr:s,size:n,title:d}=t,N=he(t,pe),f=n||a.size||"1em",u;return a.className&&(u=a.className),t.className&&(u=(u?u+" ":"")+t.className),h.createElement("svg",C({stroke:"currentColor",fill:"currentColor",strokeWidth:"0"},a.attr,s,N,{className:u,style:_(_({color:t.color||a.color},a.style),t.style),height:f,width:f,xmlns:"http://www.w3.org/2000/svg"}),d&&h.createElement("title",null,d),t.children)};return z!==void 0?h.createElement(z.Consumer,null,a=>r(a)):r(H)}function ye(t){return S({attr:{viewBox:"0 0 384 512"},child:[{tag:"path",attr:{d:"M318.7 268.7c-.2-36.7 16.4-64.4 50-84.8-18.8-26.9-47.2-41.7-84.7-44.6-35.5-2.8-74.3 20.7-88.5 20.7-15 0-49.4-19.7-76.4-19.7C63.3 141.2 4 184.8 4 273.5q0 39.3 14.4 81.2c12.8 36.7 59 126.7 107.2 125.2 25.2-.6 43-17.9 75.8-17.9 31.8 0 48.3 17.9 76.4 17.9 48.6-.7 90.4-82.5 102.6-119.3-65.2-30.7-61.7-90-61.7-91.9zm-56.6-164.2c27.3-32.4 24.8-61.9 24-72.5-24.1 1.4-52 16.4-67.9 34.9-17.5 19.8-27.8 44.3-25.6 71.9 26.1 2 49.9-11.4 69.5-34.3z"},child:[]}]})(t)}function je(t){return S({attr:{viewBox:"0 0 496 512"},child:[{tag:"path",attr:{d:"M248 8C111.1 8 0 119.1 0 256s111.1 248 248 248 248-111.1 248-248S384.9 8 248 8zm100.7 364.9c-4.2 0-6.8-1.3-10.7-3.6-62.4-37.6-135-39.2-206.7-24.5-3.9 1-9 2.6-11.9 2.6-9.7 0-15.8-7.7-15.8-15.8 0-10.3 6.1-15.2 13.6-16.8 81.9-18.1 165.6-16.5 237 26.2 6.1 3.9 9.7 7.4 9.7 16.5s-7.1 15.4-15.2 15.4zm26.9-65.6c-5.2 0-8.7-2.3-12.3-4.2-62.5-37-155.7-51.9-238.6-29.4-4.8 1.3-7.4 2.6-11.9 2.6-10.7 0-19.4-8.7-19.4-19.4s5.2-17.8 15.5-20.7c27.8-7.8 56.2-13.6 97.8-13.6 64.9 0 127.6 16.1 177 45.5 8.1 4.8 11.3 11 11.3 19.7-.1 10.8-8.5 19.5-19.4 19.5zm31-76.2c-5.2 0-8.4-1.3-12.9-3.9-71.2-42.5-198.5-52.7-280.9-29.7-3.6 1-8.1 2.6-12.9 2.6-13.2 0-23.3-10.3-23.3-23.6 0-13.6 8.4-21.3 17.4-23.9 35.2-10.3 74.6-15.2 117.5-15.2 73 0 149.5 15.2 205.4 47.8 7.8 4.5 12.9 10.7 12.9 22.6 0 13.6-11 23.3-23.2 23.3z"},child:[]}]})(t)}function ve(t){return S({attr:{role:"img",viewBox:"0 0 24 24"},child:[{tag:"path",attr:{d:"M.331 11.378s.5418-.089.765.1439c.2234.2332.077.7156-.2195.7237-.2965.01-.5705.063-.765-.1439-.1946-.2066-.1424-.6218.2195-.7237m5.881 3.2925c-.0522.01-.1075-.018-.164-.059-.3884-.5413-.5287-2.3923-.707-2.5025-.185-.1144-.8545 1.0255-2.1862.903-.5569-.051-1.1236-.4121-1.4573-.662.031-.4206.0364-1.4027.8659-1.0833.5038.1939 1.3667.7266 2.1245-.23.8378-1.0579 1.2999-.7506 1.577-.5206.2771.23.0925 1.4259.5058 1.0916.4133-.3343 2.082-2.4103 2.082-2.4103s1.292-1.303 1.4898.067c.1979 1.3698 1.0403 2.8877 1.2635 2.8445.2234-.043 2.8223-5.3253 3.1945-5.666.3722-.3409 1.6252-.2961 1.5657.5781-.0596.8742-.1871 6.308-.1871 6.308s-.147 1.5311.0924.7128c.0992-.3392.206-.6453.3392-1.0024.6414-2.0534 1.734-5.5613 2.2784-7.3688.1252-.4325.233-.8037.3166-1.0891l.0001-.0008a3.5925 3.5925 0 0 1 .0973-.3305c.0455-.1532.0763-.2546.0858-.2813.0243-.068.0925-.1192.1884-.157.0962-.061.1995-.064.3165-.067.3021-.027.6907.012 1.0401.1119.1018 0 .2125.037.3172.1118v.0001s.0063 0 .0151.01c.0023 0 .0048 0 .0073.01.0219.015.0573.045.0983.095.0012 0 .0025 0 .004.01.017.021.0341.045.0515.073.1952.2863.315.814.1948 1.7498-.2996 2.3354-.5316 7.1397-.5316 7.1397s-.0461.2298.4353-.782c.0167-.035.0383-.066.058-.098.026-.017.0552-.042.0913-.085.2974-.3546 1.0968-.5629 1.6512-.5586.2336.028.4293.087.5462.1609.2188.333.0897 1.562.0897 1.562-.4612.043-1.3403.2908-1.6519.3366-.3118.046-.7852 2.0699-1.4433 1.8629-.6581-.2069-2.1246-1.1268-2.1246-1.2533 0-.1102.1152-1.4546.1453-1.8016.0022-.024.004-.046.0058-.068a.152.152 0 0 1 .0014-.014l-.0002.0003c.0213-.2733.0023-.3927-.1239-.1199-.1086.2346-.581 1.7359-1.1078 3.3709-.0556.1429-1.0511 3.1558-1.1818 3.5231-.156.4261-.287.7523-.3776.921-.1378.1867-.3234.3036-.5826.2252-.6465-.1954-1.4654-1.0889-1.473-1.3106-.0155-1.2503.0608-7.973-.2423-7.4127-.311.5744-2.73 4.5608-2.73 4.5608-.0405.01-.0705.01-.1062.01-.1712-.019-.4366-.074-.51-.2384-.004-.01-.0094-.018-.0129-.028-.0035-.01-.0075-.022-.0135-.04-.0329-.1097-.0463-.2289-.0753-.3265-.1082-.3652-.2813-.8886-.463-1.421-.2784-.9079-.5654-1.8366-.6127-1.9391-.0923-.2007-.2268-.116-.3475-.0002-.54.458-1.6868 2.4793-2.7225 2.5898"},child:[]}]})(t)}E.extend(re);function Ae({song:t,relatedSongs:r,isLiked:a,likesCount:s}){const{isDarkMode:n}=Z(),[d,N]=k.useState(!1),[f,u]=k.useState(!1),[$,R]=k.useState(t.views),{props:X}=J(),F=X.user,y=encodeURIComponent(t.slug),O=encodeURIComponent(t.title),{liked:T,count:U,toggleLike:V}=ee({likeableId:t.id,likeableType:"song",initialLiked:a,initialCount:s,routeName:"like.toggle"}),Y=()=>{if(!F){window.location.replace("/user/login");return}V()},j={whatsapp:`https://api.whatsapp.com/send?text=${O}%20${y}`,facebook:`https://www.facebook.com/sharer/sharer.php?u=${y}`,twitter:`https://twitter.com/intent/tweet?text=${O}&url=${y}`,gmail:`mailto:?subject=${O}&body=${y}`};k.useEffect(()=>{(async()=>{try{const v=await te.post(`/songs/${t.slug}/track-view`);R(v.data.views)}catch(v){console.error("Error tracking post view:",v)}})()},[t.slug]);const q=i=>(W=>{const G=new DOMParser().parseFromString(W,"text/html");return Array.from(G.body.childNodes).map((w,c)=>{if(w.nodeType===Node.TEXT_NODE){const o=w.textContent?.trim();return o?e.jsx("p",{className:"blog-paragraph",children:o},c):null}if(w.nodeType===Node.ELEMENT_NODE){const o=w;switch(o.tagName.toLowerCase()){case"img":return e.jsxs("figure",{className:"blog-figure",children:[e.jsx("img",{src:o.getAttribute("src")||"/placeholder.svg",alt:o.getAttribute("alt")||"Blog image",className:"blog-image"}),o.getAttribute("alt")&&e.jsx("figcaption",{className:"blog-figcaption",children:o.getAttribute("alt")})]},c);case"h4":return e.jsx("h4",{className:"blog-heading-4",children:o.textContent},c);case"h3":return e.jsx("h3",{className:"blog-heading-3",children:o.textContent},c);case"h2":return e.jsx("h2",{className:"blog-heading-2",children:o.textContent},c);case"p":return e.jsx("p",{className:"blog-paragraph",children:Array.from(o.childNodes).map((p,x)=>{if(p.nodeType===Node.TEXT_NODE)return p.textContent;if(p.nodeType===Node.ELEMENT_NODE){const l=p;if(l.tagName.toLowerCase()==="strong")return e.jsx("strong",{children:l.textContent},x);if(l.tagName.toLowerCase()==="em")return e.jsx("em",{children:l.textContent},x)}return null})},c);case"ul":return e.jsx("ul",{className:"blog-list",children:Array.from(o.children).map((p,x)=>e.jsx("li",{className:"blog-list-item",children:Array.from(p.childNodes).map((l,L)=>{if(l.nodeType===Node.TEXT_NODE)return l.textContent;if(l.nodeType===Node.ELEMENT_NODE){const g=l;if(g.tagName.toLowerCase()==="p")return e.jsx("span",{children:Array.from(g.childNodes).map((m,M)=>{if(m.nodeType===Node.TEXT_NODE)return m.textContent;if(m.nodeType===Node.ELEMENT_NODE){const b=m;if(b.tagName.toLowerCase()==="strong")return e.jsx("strong",{children:b.textContent},M)}return null})},L)}return null})},x))},c);case"ol":return e.jsx("ol",{className:"blog-ordered-list",children:Array.from(o.children).map((p,x)=>e.jsx("li",{className:"blog-list-item",children:Array.from(p.childNodes).map((l,L)=>{if(l.nodeType===Node.TEXT_NODE)return l.textContent;if(l.nodeType===Node.ELEMENT_NODE){const g=l;if(g.tagName.toLowerCase()==="p")return e.jsx("span",{children:Array.from(g.childNodes).map((m,M)=>{if(m.nodeType===Node.TEXT_NODE)return m.textContent;if(m.nodeType===Node.ELEMENT_NODE){const b=m;if(b.tagName.toLowerCase()==="strong")return e.jsx("strong",{children:b.textContent},M)}return null})},L)}return null})},x))},c);case"blockquote":return e.jsx("blockquote",{className:"blog-blockquote",children:o.textContent},c);default:return null}}return null})})(i);return t?e.jsx("div",{className:`min-h-screen bg-background text-foreground ${n?"dark":""}`,children:e.jsxs("article",{className:"w-full",children:[e.jsxs("div",{className:"relative h-96 w-full overflow-hidden bg-muted sm:h-[500px]",children:[e.jsx("img",{src:t.thumbnail_url||"/placeholder.svg",alt:t.title,className:"h-full w-full object-cover"}),e.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-black/70 via-black/30 to-transparent"})]}),e.jsxs("div",{className:"mx-auto max-w-3xl px-4 sm:px-6 lg:px-8",children:[e.jsxs("button",{onClick:()=>P.visit("/songs"),className:"mt-8 mb-8 flex items-center gap-2 font-medium text-primary transition-colors hover:text-accent",children:[e.jsx(A,{className:"h-5 w-5"}),"Back to Songs"]}),e.jsxs("div",{className:"mb-8",children:[e.jsx("h1",{className:"blog-title mb-6 post-card-title",children:t.title}),e.jsxs("div",{className:"blog-meta space-y-1 border-b border-border pb-6",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(se,{className:"h-4 w-4 text-muted-foreground"}),e.jsx("span",{className:"font-medium",children:t.user.name})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(oe,{className:"h-4 w-4 text-muted-foreground"}),e.jsx("span",{children:E(t.created_at).format("MMMM D, YYYY")})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(le,{className:"h-4 w-4 text-muted-foreground"}),e.jsxs("span",{children:[$," ",$===1?"view":"views"]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(ie,{className:"h-4 w-4 text-muted-foreground"}),e.jsx("span",{children:E(t.created_at).fromNow()})]})]})]}),e.jsxs("div",{className:"blog-content py-8 post-card-font",children:[q(t.content),t.file_path&&e.jsxs("div",{className:"mt-8 flex flex-col items-center",children:[e.jsx("h3",{className:"mb-3 text-center text-lg font-semibold",children:"Listen to this song"}),e.jsxs("audio",{controls:!0,className:"w-full max-w-md rounded-lg border border-border",children:[e.jsx("source",{src:t.file_path,type:"audio/mpeg"}),"Your browser does not support the audio element."]})]}),t.spotify_embed?e.jsx("iframe",{style:{borderRadius:"12px"},src:t.spotify_embed,width:"100%",height:"152",allow:"autoplay; clipboard-write; encrypted-media; fullscreen; picture-in-picture",loading:"lazy"}):e.jsx("p",{}),t.audiomack_url?e.jsx("iframe",{src:t.audiomack_url,style:{borderRadius:12,border:0},scrolling:"no",width:"100%",height:"252",title:"Lalala"}):e.jsx("p",{})]}),e.jsxs("div",{className:"relative flex flex-wrap items-center gap-4 border-t border-b border-border py-8",children:[e.jsxs("button",{onClick:Y,className:`flex items-center gap-2 rounded-lg px-6 py-3 font-medium transition-all ${T?"bg-primary text-primary-foreground":"bg-secondary text-secondary-foreground hover:bg-secondary/80"}`,children:[e.jsx(ce,{className:`h-5 w-5 ${T?"fill-current":""}`}),T?"Liked":"Like this"," (",U,")"]}),e.jsxs("div",{className:"relative",children:[e.jsxs("button",{onClick:()=>N(!d),className:"flex cursor-pointer items-center gap-2 rounded-lg bg-secondary px-6 py-3 font-medium text-secondary-foreground transition-all hover:bg-secondary/80",children:[e.jsx(ae,{className:"h-5 w-5"}),"Share"]}),d&&e.jsx("div",{className:`animate-fade-in absolute left-0 z-20 mt-2 w-56 rounded-lg ${n?"bg-gray-900":"bg-white"} shadow-lg ring-1 ring-black/5`,onMouseLeave:()=>N(!1),children:e.jsxs("div",{className:"flex flex-col py-2",children:[e.jsxs("a",{href:j.whatsapp,target:"_blank",rel:"noopener noreferrer",className:`flex items-center gap-2 px-4 py-2 text-sm ${n?"hover:bg-gray-700":"hover:bg-gray-100"}`,children:[e.jsx(me,{className:"h-4 w-4 text-green-500"}),"Share on WhatsApp"]}),e.jsxs("a",{href:j.facebook,target:"_blank",rel:"noopener noreferrer",className:`flex items-center gap-2 px-4 py-2 text-sm ${n?"hover:bg-gray-700":"hover:bg-gray-100"}`,children:[e.jsx(D,{className:"h-4 w-4 text-blue-600"}),"Share on Facebook"]}),e.jsxs("a",{href:j.twitter,target:"_blank",rel:"noopener noreferrer",className:`flex items-center gap-2 px-4 py-2 text-sm ${n?"hover:bg-gray-700":"hover:bg-gray-100"}`,children:[e.jsx(Q,{className:"h-4 w-4 text-sky-500"}),"Share on Twitter"]}),e.jsxs("a",{href:j.gmail,target:"_blank",rel:"noopener noreferrer",className:`flex items-center gap-2 px-4 py-2 text-sm ${n?"hover:bg-gray-700":"hover:bg-gray-100"}`,children:[e.jsx(ne,{className:"h-4 w-4 text-red-500"}),"Share via Gmail"]})]})})]}),e.jsxs("div",{className:"relative",children:[e.jsxs("button",{onClick:()=>u(!f),className:"flex cursor-pointer items-center gap-2 rounded-lg bg-secondary px-6 py-3 font-medium text-secondary-foreground transition-all hover:bg-secondary/80",children:[e.jsx(ue,{className:"h-5 w-5"}),"Continue to Listen"]}),f&&e.jsx("div",{className:`animate-fade-in absolute left-0 z-20 mt-2 w-56 rounded-lg ${n?"bg-gray-900":"bg-white"} shadow-lg ring-1 ring-black/5`,onMouseLeave:()=>u(!1),children:e.jsxs("div",{className:"flex flex-col py-2",children:[t.apple_music&&e.jsxs("a",{href:t.apple_music,target:"_blank",rel:"noopener noreferrer",className:`flex items-center gap-2 px-4 py-2 text-sm ${n?"hover:bg-gray-700":"hover:bg-gray-100"}`,children:[e.jsx(ye,{className:"h-4 w-4 text-green-500"}),"Apple Music"]}),t.voicenute&&e.jsxs("a",{href:t.voicenute,target:"_blank",rel:"noopener noreferrer",className:`flex items-center gap-2 px-4 py-2 text-sm ${n?"hover:bg-gray-700":"hover:bg-gray-100"}`,children:[e.jsx(D,{className:"h-4 w-4 text-blue-600"}),"Voicenute"]}),t.spotify&&e.jsxs("a",{href:t.spotify,target:"_blank",rel:"noopener noreferrer",className:`flex items-center gap-2 px-4 py-2 text-sm ${n?"hover:bg-gray-700":"hover:bg-gray-100"}`,children:[e.jsx(je,{className:"h-4 w-4 text-sky-500"}),"Spotify"]}),t.audio_mack&&e.jsxs("a",{href:t.audio_mack,target:"_blank",rel:"noopener noreferrer",className:`flex items-center gap-2 px-4 py-2 text-sm ${n?"hover:bg-gray-700":"hover:bg-gray-100"}`,children:[e.jsx(ve,{className:"h-4 w-4 text-red-500"}),"Audio Mack"]})]})})]})]}),e.jsxs("div",{className:"py-12",children:[e.jsx("h2",{className:"mb-8 text-3xl font-bold",children:"Related Songs"}),e.jsx("div",{className:"grid grid-cols-1 gap-6 md:grid-cols-2",children:r?.length?r.map(i=>e.jsxs("div",{onClick:()=>P.visit(`/songs/${i.slug}`),className:"group cursor-pointer",children:[e.jsx("div",{className:"relative mb-4 h-48 overflow-hidden rounded-lg bg-muted",children:e.jsx("img",{src:i.thumbnail_url||"/placeholder.svg",alt:i.title,className:"h-full w-full object-cover transition-transform duration-300 group-hover:scale-105"})}),e.jsx("h3",{className:"mb-2 text-xl font-bold transition-colors group-hover:text-primary",children:i.title}),e.jsx("p",{className:"text-sm text-muted-foreground",children:E(i.created_at).fromNow()})]},i.id)):e.jsx("p",{className:"text-gray-500 italic",children:"No related songs available."})})]})]})]})}):e.jsx("div",{className:"min-h-screen bg-background text-foreground",children:e.jsxs("div",{className:"mx-auto max-w-4xl px-4 py-12 sm:px-6 lg:px-8",children:[e.jsxs("button",{onClick:()=>P.visit(document.referrer||"/"),className:"mb-8 flex items-center gap-2 text-primary transition-colors hover:text-accent",children:[e.jsx(A,{className:"h-5 w-5"}),e.jsx("span",{className:"font-medium",children:"Back"})]}),e.jsxs("div",{className:"py-12 text-center",children:[e.jsx("h1",{className:"mb-4 text-4xl font-bold",children:"Song not found"}),e.jsx("p",{className:"text-lg text-muted-foreground",children:"The song you're looking for doesn't exist."})]})]})})}export{Ae as default};
